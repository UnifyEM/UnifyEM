components:
  schemas:
    schema.API400:
      properties:
        code:
          example: 400
          type: integer
        details:
          example: bad request
          type: string
        status:
          example: error
          type: string
      type: object
    schema.API401:
      properties:
        code:
          example: 401
          type: integer
        details:
          example: authentication failed
          type: string
        status:
          example: error
          type: string
      type: object
    schema.API404:
      properties:
        code:
          example: 404
          type: integer
        details:
          example: object not found
          type: string
        status:
          example: error
          type: string
      type: object
    schema.API500:
      properties:
        code:
          example: 500
          type: integer
        details:
          example: internal server error
          type: string
        status:
          example: error
          type: string
      type: object
    schema.APICmdResponse:
      properties:
        agent_friendly_name:
          example: Tuxedo001 Linux Laptop
          type: string
        agent_id:
          example: A-12345678-abcd-1234-5648-1234567890ab
          type: string
        code:
          example: 200
          type: integer
        details:
          example: request queued for agent
          type: string
        request_id:
          example: R-6f9dcb2e-2e1b-4c3a-8a67-5b3e0d740df6
          type: string
        status:
          example: ok
          type: string
      type: object
    schema.APIConfigResponse:
      properties:
        code:
          example: 200
          type: integer
        data:
          additionalProperties:
            type: string
          type: object
        details:
          example: Config set retrieved
          type: string
        status:
          example: ok
          type: string
      type: object
    schema.APIEventsResponse:
      properties:
        code:
          example: 200
          type: integer
        data:
          items:
            $ref: '#/components/schemas/schema.AgentEvent'
          type: array
          uniqueItems: false
        details:
          example: events
          type: string
        status:
          example: ok
          type: string
      type: object
    schema.APIGenericResponse:
      properties:
        code:
          description: HTTP status code
          example: 200
          type: integer
        details:
          description: Optional response details
          example: request processed
          type: string
        status:
          description: API status response - see schema/apiMeta.go
          example: ok
          type: string
      type: object
    schema.APILoginResponse:
      properties:
        access_token:
          description: JWT access token
          example: jwt
          type: string
        code:
          description: HTTP status code
          example: 200
          type: integer
        refresh_token:
          description: JTW refresh token
          example: jwt
          type: string
        status:
          description: Text Status
          example: ok
          type: string
      type: object
    schema.APIRegisterResponse:
      properties:
        access_token:
          type: string
        agent_id:
          type: string
        code:
          type: integer
        details:
          type: string
        refresh_token:
          type: string
        server_public_enc:
          type: string
        server_public_sig:
          type: string
        status:
          type: string
      type: object
    schema.APIReportResponse:
      properties:
        code:
          type: integer
        details:
          type: string
        report:
          $ref: '#/components/schemas/schema.Report'
        status:
          type: string
      type: object
    schema.APIRequestStatusResponse:
      properties:
        code:
          type: integer
        details:
          type: string
        report:
          $ref: '#/components/schemas/schema.AgentRequestRecordList'
        status:
          type: string
      type: object
    schema.APISyncResponse:
      properties:
        code:
          type: integer
        conf:
          additionalProperties:
            type: string
          type: object
        details:
          type: string
        requests:
          description: Requests for the agent to process and respond to
          items:
            $ref: '#/components/schemas/schema.AgentRequest'
          type: array
          uniqueItems: false
        service_credentials:
          description: Encrypted "username:password" with agent's public key
          type: string
        status:
          type: string
        triggers:
          $ref: '#/components/schemas/schema.AgentTriggers'
      type: object
    schema.APITokenRefreshResponse:
      properties:
        access_token:
          description: JWT access token
          example: jwt
          type: string
        code:
          description: HTTP status code
          example: 200
          type: integer
        server_public_enc:
          description: Server's EC public encryption key
          type: string
        server_public_sig:
          description: Server's EC public signature key
          type: string
        status:
          description: Text Status
          example: ok
          type: string
      type: object
    schema.AgentEvent:
      properties:
        agent_id:
          type: string
        details:
          additionalProperties:
            type: string
          type: object
        event:
          type: string
        event_id:
          type: string
        time:
          type: string
        type:
          type: string
      type: object
    schema.AgentMessage:
      properties:
        agent_id:
          description: The ID of the agent
          type: string
        message:
          description: The message itself
          type: string
        message_type:
          description: Kind of message (avoiding Type as it is a reserved word)
          type: string
        sent:
          description: Timestamp of when the message was sent
          type: string
      type: object
    schema.AgentMeta:
      properties:
        active:
          type: boolean
        agent_id:
          type: string
        build:
          type: integer
        client_public_enc:
          type: string
        client_public_sig:
          type: string
        first_seen:
          type: string
        friendly_name:
          type: string
        last_ip:
          type: string
        last_seen:
          type: string
        service_credentials:
          description: Encrypted "username:password" with agent's public key
          type: string
        status:
          $ref: '#/components/schemas/schema.AgentStatus'
        tags:
          items:
            type: string
          type: array
          uniqueItems: false
        triggers:
          $ref: '#/components/schemas/schema.AgentTriggers'
        users:
          items:
            type: string
          type: array
          uniqueItems: false
        version:
          type: string
      type: object
    schema.AgentRegisterRequest:
      properties:
        build:
          type: integer
        client_public_enc:
          type: string
        client_public_sig:
          type: string
        token:
          type: string
        version:
          type: string
      type: object
    schema.AgentRequest:
      properties:
        ack_required:
          type: boolean
        agent_id:
          type: string
        created:
          type: string
        parameters:
          additionalProperties:
            type: string
          type: object
        request:
          type: string
        request_id:
          type: string
        requester:
          type: string
      type: object
    schema.AgentRequestRecord:
      properties:
        ack_required:
          type: boolean
        agent:
          type: string
        agent_id:
          type: string
        cancelled:
          type: boolean
        last_updated:
          type: string
        parameters:
          additionalProperties:
            type: string
          type: object
        request_id:
          type: string
        requester:
          type: string
        response_data: {}
        response_details:
          type: string
        send_count:
          type: integer
        status:
          type: string
        time_created:
          type: string
      type: object
    schema.AgentRequestRecordList:
      properties:
        requests:
          items:
            $ref: '#/components/schemas/schema.AgentRequestRecord'
          type: array
          uniqueItems: false
      type: object
    schema.AgentResponse:
      properties:
        cmd:
          type: string
        data: {}
        request_id:
          type: string
        response:
          type: string
        service_credentials:
          description: Double-encrypted "username:password" for server
          type: string
        success:
          type: boolean
      type: object
    schema.AgentStatus:
      properties:
        details:
          additionalProperties:
            type: string
          type: object
        info:
          items:
            type: string
          type: array
          uniqueItems: false
        last_updated:
          type: string
      type: object
    schema.AgentSyncRequest:
      properties:
        build:
          type: integer
        messages:
          items:
            $ref: '#/components/schemas/schema.AgentMessage'
          type: array
          uniqueItems: false
        responses:
          description: List of responses to previous requests
          items:
            $ref: '#/components/schemas/schema.AgentResponse'
          type: array
          uniqueItems: false
        version:
          type: string
      type: object
    schema.AgentTagsRequest:
      properties:
        tags:
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    schema.AgentTagsResponse:
      properties:
        code:
          type: integer
        status:
          type: string
        tags:
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    schema.AgentTriggers:
      properties:
        lost:
          example: false
          type: boolean
        uninstall:
          example: false
          type: boolean
        wipe:
          example: false
          type: boolean
      type: object
    schema.AgentUsersRequest:
      properties:
        users:
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    schema.AgentUsersResponse:
      properties:
        code:
          type: integer
        status:
          type: string
        users:
          items:
            type: string
          type: array
          uniqueItems: false
      type: object
    schema.AgentsByTagResponse:
      properties:
        agents:
          items:
            $ref: '#/components/schemas/schema.AgentMeta'
          type: array
          uniqueItems: false
        code:
          type: integer
        status:
          type: string
      type: object
    schema.CmdRequest:
      properties:
        args:
          additionalProperties:
            type: string
          type: object
        cmd:
          type: string
      type: object
    schema.ConfigRequest:
      properties:
        parameters:
          additionalProperties:
            type: string
          type: object
      type: object
    schema.LoginRequest:
      properties:
        password:
          type: string
        username:
          type: string
      type: object
    schema.RefreshRequest:
      properties:
        client_public_enc:
          type: string
        client_public_sig:
          type: string
        refresh_token:
          type: string
      type: object
    schema.Report:
      properties:
        data:
          items:
            type: integer
          type: array
        name:
          type: string
        type:
          type: string
      type: object
    schema.ReportRequest:
      properties:
        args:
          additionalProperties:
            type: string
          type: object
        report:
          type: string
      type: object
    schema.UserCreateRequest:
      properties:
        display_name:
          type: string
        email:
          type: string
        user:
          type: string
      type: object
    schema.UserCreateResponse:
      properties:
        code:
          type: integer
        status:
          type: string
        user:
          $ref: '#/components/schemas/schema.UserMeta'
      type: object
    schema.UserDeleteResponse:
      properties:
        code:
          type: integer
        status:
          type: string
      type: object
    schema.UserList:
      properties:
        code:
          example: 200
          type: integer
        status:
          example: ok
          type: string
        users:
          items:
            $ref: '#/components/schemas/schema.UserMeta'
          type: array
          uniqueItems: false
      type: object
    schema.UserMeta:
      properties:
        created_at:
          example: "2023-01-01T00:00:00Z"
          type: string
        display_name:
          example: Alice Smith
          type: string
        email:
          example: alice@example.com
          type: string
        last_updated:
          example: "2023-01-01T00:00:00Z"
          type: string
        user:
          example: alice
          type: string
      type: object
  securitySchemes:
    BearerAuth:
      description: Type "Bearer" followed by a space and JWT token.
      in: header
      name: Authorization
      type: apiKey
externalDocs:
  description: ""
  url: ""
info:
  description: Unified Endpoint Management Server
  title: UEM-Server
  version: "0.1"
openapi: 3.1.0
paths:
  /agent/{id}:
    delete:
      description: Deletes an agent by ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Delete agent
      tags:
      - Agent management
    get:
      description: Retrieves agent information with optional ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get agent information
      tags:
      - Agent management
    post:
      description: updates an agent by ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentMeta'
        description: Agent data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Update agent information
      tags:
      - Agent management
    put:
      description: updates an agent by ID
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentMeta'
        description: Agent data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Update agent information
      tags:
      - Agent management
  /agent/{id}/tags:
    get:
      description: Retrieves the list of tags for the specified agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.AgentTagsResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: List agent tags
      tags:
      - Agent management
  /agent/{id}/tags/add:
    post:
      description: Adds one or more tags to the specified agent (duplicates ignored)
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentTagsRequest'
        description: Tags to add
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.AgentTagsResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Add tags to agent
      tags:
      - Agent management
  /agent/{id}/tags/remove:
    post:
      description: Removes one or more tags from the specified agent (case-insensitive)
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentTagsRequest'
        description: Tags to remove
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.AgentTagsResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Remove tags from agent
      tags:
      - Agent management
  /agent/{id}/users/add:
    post:
      description: Adds one or more users to the specified agent (duplicates ignored,
        users must exist)
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentUsersRequest'
        description: Users to add
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.AgentUsersResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Add users to agent
      tags:
      - Agent management
  /agent/{id}/users/remove:
    post:
      description: Removes one or more users from the specified agent
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentUsersRequest'
        description: Users to remove
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.AgentUsersResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Remove users from agent
      tags:
      - Agent management
  /agent/by-tag/{tag}:
    get:
      description: Retrieves all agents that have the specified tag (case-insensitive)
      parameters:
      - description: Tag
        in: path
        name: tag
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.AgentsByTagResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Get agents by tag
      tags:
      - Agent management
  /cmd:
    post:
      description: Creates and queues a command request for an agent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.CmdRequest'
        description: Command request
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APICmdResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Send command to agent
      tags:
      - Agent management
  /config/agents:
    get:
      description: Retrieves the current global agent configuration
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIConfigResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Retrieve global agent configuration
      tags:
      - Configuration
    post:
      description: Updates the global agent configuration
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.ConfigRequest'
        description: Agent configuration
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Update global agent configuration
      tags:
      - Configuration
    put:
      description: Updates the global agent configuration
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.ConfigRequest'
        description: Agent configuration
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Update global agent configuration
      tags:
      - Configuration
  /config/server:
    get:
      description: Retrieves the current server configuration
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIConfigResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Retrieve server configuration
      tags:
      - Configuration
    post:
      description: Updates the server configuration
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.ConfigRequest'
        description: Server configuration
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Update server configuration
      tags:
      - Configuration
    put:
      description: Updates the server configuration
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.ConfigRequest'
        description: Server configuration
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Update server configuration
      tags:
      - Configuration
  /events:
    get:
      description: Retrieves server events
      parameters:
      - description: Start date in YYYYMMDD format
        in: query
        name: start
        schema:
          type: string
      - description: End date in YYYYMMDD format
        in: query
        name: end
        schema:
          type: string
      - description: Start time in Unix timestamp format
        in: query
        name: start_time
        schema:
          type: string
      - description: End time in Unix timestamp format
        in: query
        name: end_time
        schema:
          type: string
      - description: Agent ID
        in: query
        name: agent_id
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/schema.APIEventsResponse'
                type: array
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Retrieve events
      tags:
      - Events
  /files/list:
    post:
      description: Creates deploy.json containing names and hashes of uem-* files
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Generate deploy.json
      tags:
      - Files
    put:
      description: Creates deploy.json containing names and hashes of uem-* files
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Generate deploy.json
      tags:
      - Files
  /login:
    post:
      description: Login with username and password to obtain access and refresh tokens
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.LoginRequest'
        description: Username and password
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APILoginResponse'
          description: Authentication successful
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Authentication failed
      summary: User authentication
      tags:
      - Authentication
  /ping:
    get:
      description: Pinging the server tests authentication and communication
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
      security:
      - BearerAuth: []
      summary: Ping the server
      tags:
      - Testing
  /refresh:
    post:
      description: Exchanges a refresh token for a new access token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.RefreshRequest'
        description: Refresh token
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APITokenRefreshResponse'
          description: New access token
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Invalid or expired refresh token
      summary: Refresh access token
      tags:
      - Authentication
  /regToken:
    get:
      description: Retrieves the current registration token
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Retrieve registration token
      tags:
      - '"Registration token"'
    post:
      description: Creates a new registration token
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Create new registration token
      tags:
      - '"Registration token"'
  /register:
    post:
      description: Agent requests registration and receives access and refresh tokens
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentRegisterRequest'
        description: Agent registration request
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIRegisterResponse'
          description: Registration successful
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Invalid registration token
      summary: Agent registration
      tags:
      - Agent communication
  /report:
    post:
      description: Generates a report on the system
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.ReportRequest'
        description: Report request
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIReportResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Generate report
      tags:
      - Reporting
  /request/{id}:
    delete:
      description: Deletes a request by ID
      parameters:
      - description: Request ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Delete request
      tags:
      - Agent management
    get:
      description: Obtain information about one or more requests sent to agents This
        includes the status and agent response, if any.
      parameters:
      - description: Request ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIRequestStatusResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Retrieve request status information
      tags:
      - Agent management
  /reset/{id}:
    post:
      description: Resets triggers for the specified agent. With respect to the "wipe"
        and "uninstall" triggers, this is only useful before the agent's next sync
        with the server.
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Reset agent triggers
      tags:
      - Agent management
    put:
      description: Resets triggers for the specified agent. With respect to the "wipe"
        and "uninstall" triggers, this is only useful before the agent's next sync
        with the server.
      parameters:
      - description: Agent ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APIGenericResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
      security:
      - BearerAuth: []
      summary: Reset agent triggers
      tags:
      - Agent management
  /sync:
    post:
      description: Agent syncs with the server to send and receive messages
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.AgentSyncRequest'
        description: Agent sync request
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.APISyncResponse'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
      security:
      - BearerAuth: []
      summary: Agent sync with server
      tags:
      - Agent communication
  /user:
    get:
      description: Retrieves a list of all users
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.UserList'
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: List all users
      tags:
      - User management
    post:
      description: Adds a new user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/schema.UserCreateRequest'
        description: User data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.UserCreateResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Conflict
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Add a new user
      tags:
      - User management
  /user/{id}:
    delete:
      description: Deletes a user by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.UserDeleteResponse'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Delete a user
      tags:
      - User management
    get:
      description: Retrieves information for a specific user
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.UserMeta'
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API400'
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API401'
          description: Unauthorized
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API404'
          description: Not Found
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/schema.API500'
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - User management
servers:
- url: localhost:8080/api/v1
